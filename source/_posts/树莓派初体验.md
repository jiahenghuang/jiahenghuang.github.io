---
title: 树莓派初体验
date: 2018-08-30 21:31:49
tags:
- 树莓派
categories:
- 树莓派
---

## 1. 无线网络设置

- 配置隐藏wifi密码

  ```shell
  #在文件底部添加(修改wifi_name和wifi_password)
  pi@raspberrypi:~ $ sudo cat >> /etc/wpa_supplicant/wpa_supplicant.conf
  network={
          ssid="wifi_name" 
          scan_ssid=1
          psk="wifi_password"
  }
  ```

- 配置无线静态ip

  ```shell
  #在文件底部添加
  pi@raspberrypi:~ $ sudo cat >> /etc/dhcpcd.conf
  interface wlan0
  static ip_address=192.168.0.103/24
  static routers=192.168.0.1
  static domain_name_servers=114.114.114.114
  ```

- 重启

  ```shell
  $ sudo reboot
  ```

## 2. 启动ssh服务

在网上看了很多人的设置，都是将sd卡里面的ssh.txt文件后缀去掉改为ssh。太low了，感觉也不靠谱

试了一个方法[树莓派新系统SSH连接被拒绝的解决方法](http://shumeipai.nxez.com/2017/02/27/raspbian-ssh-connection-refused.html)，亲测可行，直接通过命令来设置才是正解

```shell
$ sudo systemctl start ssh.service
#设置开机自启
#将sudo systemctl start ssh.service添加到/etc/rc.local exit 0上一行
```

# 3. 更新换国内源

```shell
#备份源文件
$ sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak
$ sudo cp /etc/apt/sources.list.d/raspi.list /etc/apt/sources.list.d/raspi.list.bak

#将原来文件中的所有内容注释掉，添加下面的源到/etc/apt/sources.list
deb http://mirrors.ustc.edu.cn/raspbian/raspbian/ jessie main contrib non-free rpi
#将下面的源添加到/etc/apt/sources.list.d/raspi.list
deb http://mirrors.ustc.edu.cn/archive.raspberrypi.org/debian/ jessie main ui
$ sudo apt-get update #更新软件源
```

参考:[树莓派3b更换为国内源](https://blog.csdn.net/MrYarnell/article/details/80165920)

# 4. 查看树莓派的linux版本

```shell
$ lsb_release -a
No LSB modules are available.
Distributor ID: Raspbian
Description:    Raspbian GNU/Linux 9.4 (stretch)
Release:        9.4
Codename:       stretch
```

# 5. 安装shaodowsocks

****

- pip方式安装

```shell
$ sudo apt-get install python-pip python-gevent python-m2crypto
$ sudo pip install shadowsocks
$ sudo vim /etc/shadowsocks/config.json
#将下面的配置文件添加进去，修改对应的server,server_port,local_address,password
{
"server":"www.abc1234",
"server_port":12800,
"local_address":"0.0.0.0",
"local_port":1080,
"password":"123456",
"timeout":600,
"method":"aes-256-cfb"
}
#/usr/local/lib/python2.7/dist-packages/shadowsocks/crypto/openssl.py 将此文件中的52行和111行中的cleanup更新为reset后，再尝试启动。
#启动shadowsocks,用which sslocal查看sslocal位置
$ sudo /usr/local/bin/sslocal -c /etc/shadowsocks/config.json -d start

#设置开机启动
$ sudo权限编辑/etc/rc.local
#在最后exit 0的上一行添加sudo /usr/local/bin/sslocal -c /etc/shadowsocks/config.json -d start,注意不同方式安装的文件位置不同，请将/usr/bin/sslocal用实际的位置替换
```

参考:

- [树莓派通过Shadowsocks科学上网方法](https://blog.lyz810.com/article/2017/01/raspberrypi-shadowsocks-config-guide/)
- 通过pip方式安装报错[AttributeError: /usr/lib/arm-linux-gnueabihf/libcrypto.so.1.1: undefined symbol: EVP_CIPHER_CTX_cleanup](https://github.com/shadowsocks/shadowsocks/issues/946)
- [树莓派SSH连接-SSH服务安装与开机自动启动](https://blog.csdn.net/qq813480700/article/details/71597808)

# 6. 搭建git服务器

参见笔记:[在服务器上添加git用户](https://ljessons.github.io/2018/08/23/%E5%9C%A8linux%E4%B8%8A%E6%90%AD%E5%BB%BAgit%E6%9C%8D%E5%8A%A1%E5%99%A8/)

```shell
$ sudo vim /etc/hostname #将raspberrypi改为gitpi就可以，可以将主机名改为gitpi
```

